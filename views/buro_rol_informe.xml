<openerp>
  <data>

    <!-- Lista de informes solicitados -->
    <record model="ir.ui.view" id="financiera_rol_tree">
      <field name="name">financiera.buro.rol.informe.tree</field>
      <field name="model">financiera.buro.rol.informe</field>
      <field name="arch" type="xml">
        <tree create="false" delete="false" edit="false">
          <field name="create_date" string="Fecha"/>
          <field name="tipo"/>
          <field name="partner_id"/>
          <field name="name"/>
          <field name="cuit"/>
          <field name="sexo"/>
          <field name="fecha_nacimiento"/>
          <field name="perfil_letra"/>
          <field name="rol_experto_nombre"/>
          <field name="rol_experto_resultado"/>
          <field name="capacidad_pago_mensual"/>
        </tree>
      </field>
    </record>

    <record model="ir.actions.act_window" id="financiera_rol_informe_action">
      <field name="name">Lista de informes solicitados</field>
      <field name="res_model">financiera.buro.rol.informe</field>
      <field name="view_mode">tree</field>
      <field name="view_id" ref="financiera_rol_tree"/>
    </record>

    <!-- menu categories -->
    
    <menuitem name="Informes" id="menu_informes" sequence="10" parent="menu_rol"/>

    <menuitem name="Informes" id="menu_informes_action" sequence="1" parent="menu_informes" action="financiera_rol_informe_action"/>



    <!-- Vista Form Partner Page Buro ROL -->

    <record id="partner_rol_form_inherited"  model="ir.ui.view">
      <field name="name">Extension Partner rol form</field>
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="base.view_partner_form"/>
      <field name="arch" type="xml">
        <xpath expr="//page[2]" position='after'>
          <page string='Buro ROL' groups="financiera_buro_rol_base.manager">
            <group>
              <group string="Ultima consulta">
                <field name="rol_domicilio_ids">
                  <tree>
                    <field name="domicilio"/>
                    <field name="tipo"/>
                  </tree>
                </field>
                <field name="rol_telefono_ids">
                  <tree>
                    <field name="telefono"/>
                    <field name="anio_guia"/>
                    <field name="titular"/>
                  </tree>
                </field>
                <field name="rol_actividad_ids">
                  <tree>
                    <field name="actividad_comercial"/>
                    <field name="codigo"/>
                    <field name="formulario"/>
                  </tree>
                </field>
              </group>
              <group string="Informes">
                <field name="buro_rol_informe_ids">
                  <tree>
                    <field name="fecha_informe"/>
                    <field name="rol_id"/>
                    <field name="name"/>
                    <field name="cuit"/>
                    <field name="perfil_letra"/>
                  </tree>
                  <form>
                    <group>
                      <field name="name"/>
                      <field name="cuit"/>
                      <!-- <field name="documento"/> -->
                      <field name="sexo"/>
                      <!-- <field name="clase"/> -->
                      <field name="fecha_nacimiento"/>
                      <field name="fecha_informe"/>
                      <field name="perfil_letra"/>
                      <field name="perfil_texto"/>
                    </group>
                    <notebook>
                      <page string="Domicilios">
                        <field name="domicilio_ids" readonly="1">
                          <tree>
                            <field name="domicilio"/>
                            <field name="tipo"/>
                          </tree>
                        </field>
                      </page>
                      <page string="Telefonos">
                        <field name="telefono_ids" readonly="1">
                          <tree>
                            <field name="telefono"/>
                            <field name="anio_guia"/>
                            <field name="titular"/>
                          </tree>
                        </field>
                      </page>
                      <page string="Actividades AFIP">
                        <field name="actividad_ids" readonly="1">
                          <tree>
                            <field name="actividad_comercial"/>
                            <field name="codigo"/>
                            <field name="formulario"/>
                          </tree>
                        </field>
                      </page>
                    </notebook>
                  </form>
                </field>
              </group>
            </group>
          </page>
        </xpath>
      </field>
    </record>


    <!-- Vista Form Partner Page Buro ROL -->

    <record id="partner_rol_basic_form_inherited"  model="ir.ui.view">
      <field name="name">Extension Partner rol form</field>
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="financiera_prestamos.partner_form_inherited"/>
      <field name="arch" type="xml">
        <xpath expr="//group[@name='risk']" position="inside">
          <group string="Riesgo Online" col="1" style="background-color: #E6E6E6">
            <group col="1" attrs="{'invisible': [('rol_cuit', '=', False)]}">
              <group col="2">
                <field name="rol_fecha_informe" readonly="1"/>
                <field name="rol_perfil_letra" readonly="1"/>
              </group>
              <field name="rol_perfil_texto" readonly="1"/>
              <group col="2">
                <group col="1">
                  <field name="rol_name" readonly="1"/>
                </group>
                <group col="1">
                  <field name="rol_cuit" readonly="1"/>
                </group>
              </group>
              <button name="button_asignar_identidad_rol" string="Asignar identidad ROL al Cliente" attrs="{'invisible': ['|', ('rol_cuit', '=', False), ('rol_name', '=', False)]}" type="object" confirm="Desea confirmar?"/>
              <field name="rol_domicilio" readonly="1"/>
              <button name="button_asignar_domicilio_rol" string="Asignar domicilio ROL al Cliente" attrs="{'invisible': [('rol_domicilio', '=', False)]}" type="object" confirm="Desea confirmar?"/>
              <group col="2">
                <group col="1">
                  <label for="rol_experto_nombre" string="Modelo evaluado"/>
                  <div>
                    <field name="rol_experto_nombre" class="oe_inline" readonly="1"/> | 
                    <field name="rol_experto_codigo" class="oe_inline" readonly="1"/>
                  </div>
                </group>
                <group col="1">
                  <field name="rol_experto_resultado" readonly="1"/>
                </group>
              </group>
              <group col="2">
                <group col="1">
                  <field name="rol_capacidad_pago_mensual" readonly="1"/>
                </group>
                <group col="1">
                  <field name="rol_partner_tipo_id" readonly="1"/>
                </group>
              </group>
              <button name="button_asignar_cpm_y_tipo_rol" string="Asignar tipo y CPM ROL al Cliente" type="object" confirm="Desea confirmar?"/>
              <group col="2">
                <group col="1">
                  <field name="rol_experto_ingreso" readonly="1"/>
                </group>
                <group col="1">
                  <field name="rol_experto_compromiso_mensual" readonly="1"/>
                </group>
              </group>
              <group col="2">
                <group col="1">
                  <field name="rol_experto_tarjeta" readonly="1"/>
                </group>
                <group col="1">
                  <field name="rol_experto_puntos" readonly="1"/>
                </group>
              </group>
              <group col="1">
                <field name="rol_experto_detalles_estado" invisible="0"/>
                <field name="rol_experto_detalles_texto" widget="html" readonly="1"/>
              </group>
            </group>
            <separate col="1"/>
            <group col="2">
              <button name="button_solicitar_informe" string="Solicitar informe" type="object" confirm="Desea solicitar el informe?"/>
              <button name="button_consultar_informe" string="Consultar informe" type="object" confirm="Desea consultar el informe?"/>
            </group>
          </group>
        </xpath>
      </field>
    </record>

    <!-- Vista Form Riesgo Crediticio -->

    <record id="financiera_res_partner_scoring_form_inherit"  model="ir.ui.view">
      <field name="name">Extension Partner rol form</field>
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="financiera_prestamos.financiera_res_partner_scoring_form"/>
      <field name="arch" type="xml">
        <xpath expr="//group[@name='risk']" position="after">
          <group string="Riesgo Online" col="1" style="background-color: #E6E6E6">
            <group col="1" attrs="{'invisible': [('rol_cuit', '=', False)]}">
              <group col="2">
                <field name="rol_fecha_informe" readonly="1"/>
                <field name="rol_perfil_letra" readonly="1"/>
              </group>
              <field name="rol_perfil_texto" readonly="1"/>
              <group col="2">
                <group col="1">
                  <field name="rol_name" readonly="1"/>
                </group>
                <group col="1">
                  <field name="rol_cuit" readonly="1"/>
                </group>
              </group>
              <button name="button_asignar_identidad_rol" string="Asignar identidad ROL al Cliente" attrs="{'invisible': ['|', ('rol_cuit', '=', False), ('rol_name', '=', False)]}" type="object" confirm="Desea confirmar?"/>
              <field name="rol_domicilio" readonly="1"/>
              <button name="button_asignar_domicilio_rol" string="Asignar domicilio ROL al Cliente" attrs="{'invisible': [('rol_domicilio', '=', False)]}" type="object" confirm="Desea confirmar?"/>
              <group col="2">
                <group col="1">
                  <label for="rol_experto_nombre" string="Modelo evaluado"/>
                  <div>
                    <field name="rol_experto_nombre" class="oe_inline" readonly="1"/> | 
                    <field name="rol_experto_codigo" class="oe_inline" readonly="1"/>
                  </div>
                </group>
                <group col="1">
                  <field name="rol_experto_resultado" readonly="1"/>
                </group>
              </group>
              <group col="2">
                <group col="1">
                  <field name="rol_capacidad_pago_mensual" readonly="1"/>
                </group>
                <group col="1">
                  <field name="rol_partner_tipo_id" readonly="1"/>
                </group>
              </group>
              <button name="button_asignar_cpm_y_tipo_rol" string="Asignar tipo y CPM ROL al Cliente" type="object" confirm="Desea confirmar?"/>
              <group col="2">
                <group col="1">
                  <field name="rol_experto_ingreso" readonly="1"/>
                </group>
                <group col="1">
                  <field name="rol_experto_compromiso_mensual" readonly="1"/>
                </group>
              </group>
              <group col="2">
                <group col="1">
                  <field name="rol_experto_tarjeta" readonly="1"/>
                </group>
                <group col="1">
                  <field name="rol_experto_puntos" readonly="1"/>
                </group>
              </group>
            </group>
            <separate col="1"/>
            <group col="2">
              <button name="button_solicitar_informe" string="Solicitar informe" type="object" confirm="Desea solicitar el informe?"/>
              <button name="button_consultar_informe" string="Consultar informe" type="object" confirm="Desea consultar el informe?"/>
            </group>
          </group>
        </xpath>
      </field>
    </record>

  </data>
</openerp>